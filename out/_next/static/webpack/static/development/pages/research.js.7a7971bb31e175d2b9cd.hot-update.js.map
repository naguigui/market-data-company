{"version":3,"file":"static/webpack/static/development/pages/research.js.7a7971bb31e175d2b9cd.hot-update.js","sources":["webpack:///./pages/research.js"],"sourcesContent":["import React, { useState, useCallback } from 'react'\nimport styled from 'styled-components'\n\nimport {\n\tLanding,\n\tResearch,\n\tWhitePaper,\n\tCaseStudies,\n\tSurvey\n} from '../sections/research-section'\n\nimport {\n\tLayout,\n\tContactFooter,\n\tResearchPdfForm,\n\tStartDownloadForm,\n\tModal,\n\tAnimatedFooterLink,\n\tThankYou\n} from '../components'\n\nimport pdfMapper from '../utils/pdfMapper'\n\n// Utils\nimport { validateEmail } from '../utils/validator'\nimport { sendEmail } from '../services/apiService'\n\nimport { useStore } from '../store/useStore'\nimport { USER_SIGNED_UP } from '../store/actionTypes'\n\nconst ContentWrapper = styled.div`\n\tmax-width: 1200px;\n\tmargin: 0 auto;\n\tpadding: 0 20px;\n\tmargin-bottom: 100px;\n`\n\nexport default () => {\n\tconst [pdfForm, setPdfForm] = useState('')\n\tconst [modalVisible, setModalVisible] = useState(false)\n\tconst [emailSent, setEmailSent] = useState(false)\n\tconst [hasError, setHasError] = useState(false)\n\n\tconst [form, setFormValues] = useState({\n\t\tfirstName: '',\n\t\tcompany: '',\n\t\temail: ''\n\t})\n\n\t// Hooks to save the users form data\n\tconst { state, dispatch } = useStore()\n\tconst saveUser = useCallback(\n\t\t(formValues) => dispatch({ type: USER_SIGNED_UP, payload: formValues }),\n\t\t[dispatch]\n\t)\n\n\tconst updateField = (e) => {\n\t\tsetFormValues({\n\t\t\t...form,\n\t\t\t[e.target.name]: e.target.value\n\t\t})\n\t}\n\n\tconst onSubmit = async () => {\n\t\ttry {\n\t\t\tconst res = await sendEmail(form)\n\t\t\tif (res.error) {\n\t\t\t\tsetHasError(true)\n\t\t\t} else {\n\t\t\t\t// Save user form to store\n\t\t\t\tsaveUser({\n\t\t\t\t\tname: form.firstName,\n\t\t\t\t\tcompany: form.company,\n\t\t\t\t\temail: form.email\n\t\t\t\t})\n\t\t\t\tsetEmailSent(true)\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tsetHasError(true)\n\t\t}\n\t}\n\n\tconst onModalClose = () => {\n\t\tsetModalVisible(false)\n\t\tsetEmailSent(false)\n\t}\n\n\tconst openModal = (researchForm) => {\n\t\tsetModalVisible(true)\n\t\tsetPdfForm(pdfMapper[researchForm])\n\t}\n\n\tconst isDisabled = form.firstName === '' || !validateEmail(form.email)\n\n\treturn (\n\t\t<Layout>\n\t\t\t<Landing />\n\t\t\t<Modal modalVisible={modalVisible} onRequestClose={onModalClose}>\n\t\t\t\t{!emailSent && !hasError && !state.user && (\n\t\t\t\t\t<ResearchPdfForm\n\t\t\t\t\t\tfirstName={form.firstName}\n\t\t\t\t\t\tcompany={form.company}\n\t\t\t\t\t\temail={form.email}\n\t\t\t\t\t\tonChange={updateField}\n\t\t\t\t\t\tisDisabled={isDisabled}\n\t\t\t\t\t\tonRequestClose={onModalClose}\n\t\t\t\t\t\tonSubmit={onSubmit}\n\t\t\t\t\t\tpdfForm={pdfForm}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{!emailSent && !hasError && state.user && (\n\t\t\t\t\t<StartDownloadForm\n\t\t\t\t\t\tonRequestClose={onModalClose}\n\t\t\t\t\t\tpdfForm={pdfForm}\n\t\t\t\t\t\tonSubmit={() => setEmailSent(true)}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{emailSent && !hasError && (\n\t\t\t\t\t<ThankYou\n\t\t\t\t\t\tdescription=\"Your download should start automatically. Enjoy!\"\n\t\t\t\t\t\tfooterMessage=\"Back to research\"\n\t\t\t\t\t\thref=\"/research\"\n\t\t\t\t\t\tonClick={onModalClose}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</Modal>\n\t\t\t<ContentWrapper>\n\t\t\t\t<Research onClick={openModal} />\n\t\t\t\t<WhitePaper onClick={openModal} />\n\t\t\t\t<CaseStudies onClick={openModal} />\n\t\t\t\t<Survey onClick={openModal} />\n\t\t\t\t<AnimatedFooterLink message=\"Back to home\" href=\"/\" />\n\t\t\t</ContentWrapper>\n\t\t\t<ContactFooter />\n\t\t</Layout>\n\t)\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AAQA;AAUA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAOA;AACA;AACA;AAHA;AANA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AACA;AAaA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AAIA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAdA;AAAA;AACA;AADA;AAAA;AAAA;AAeA;AACA;AAhBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA;AACA;AACA;AAAA;AAAA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;A","sourceRoot":""}