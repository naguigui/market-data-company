{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _this = this,\n    _jsxFileName = \"/mnt/c/Users/warre/dev/flatiron/projects/market-data-company/pages/research.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useCallback } from 'react';\nimport styled from 'styled-components';\nimport { Landing, Research, WhitePaper // CaseStudies,\n, Survey } from '../sections/research-section';\nimport { Layout, ContactFooter, ResearchPdfForm, StartDownloadForm, Modal, AnimatedFooterLink, ThankYou } from '../components';\nimport pdfMapper from '../utils/pdfMapper'; // Utils\n\nimport { validateEmail } from '../utils/validator';\nimport { sendEmail } from '../services/apiService';\nimport { useStore } from '../store/useStore';\nimport { USER_SIGNED_UP } from '../store/actionTypes';\nvar ContentWrapper = styled.div.withConfig({\n  displayName: \"research__ContentWrapper\",\n  componentId: \"sc-8mb7la-0\"\n})([\"max-width:1200px;margin:0 auto;padding:0 20px;margin-bottom:100px;\"]);\n_c = ContentWrapper;\nexport default _s(function () {\n  _s();\n\n  var _useState = useState(''),\n      pdfForm = _useState[0],\n      setPdfForm = _useState[1];\n\n  var _useState2 = useState(false),\n      modalVisible = _useState2[0],\n      setModalVisible = _useState2[1];\n\n  var _useState3 = useState(false),\n      emailSent = _useState3[0],\n      setEmailSent = _useState3[1];\n\n  var _useState4 = useState(false),\n      hasError = _useState4[0],\n      setHasError = _useState4[1];\n\n  var _useState5 = useState({\n    firstName: '',\n    company: '',\n    email: ''\n  }),\n      form = _useState5[0],\n      setFormValues = _useState5[1]; // Hooks to save the users form data\n\n\n  var _useStore = useStore(),\n      state = _useStore.state,\n      dispatch = _useStore.dispatch;\n\n  var saveUser = useCallback(function (formValues) {\n    return dispatch({\n      type: USER_SIGNED_UP,\n      payload: formValues\n    });\n  }, [dispatch]);\n\n  var updateField = function updateField(e) {\n    setFormValues(_objectSpread(_objectSpread({}, form), {}, _defineProperty({}, e.target.name, e.target.value)));\n  };\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return sendEmail(form);\n\n            case 3:\n              res = _context.sent;\n\n              if (res.error) {\n                setHasError(true);\n              } else {\n                // Save user form to store\n                saveUser({\n                  name: form.firstName,\n                  company: form.company,\n                  email: form.email\n                });\n                setEmailSent(true);\n              }\n\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              setHasError(true);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7]]);\n    }));\n\n    return function onSubmit() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var onModalClose = function onModalClose() {\n    setModalVisible(false);\n    setEmailSent(false);\n  };\n\n  var openModal = function openModal(researchForm) {\n    setModalVisible(true);\n    setPdfForm(pdfMapper[researchForm]);\n  };\n\n  var isDisabled = form.firstName === '' || !validateEmail(form.email);\n  return __jsx(Layout, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 3\n    }\n  }, __jsx(Landing, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 4\n    }\n  }), __jsx(Modal, {\n    modalVisible: modalVisible,\n    onRequestClose: onModalClose,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 4\n    }\n  }, !emailSent && !hasError && !state.user && __jsx(ResearchPdfForm, {\n    firstName: form.firstName,\n    company: form.company,\n    email: form.email,\n    onChange: updateField,\n    isDisabled: isDisabled,\n    onRequestClose: onModalClose,\n    onSubmit: onSubmit,\n    pdfForm: pdfForm,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 6\n    }\n  }), !emailSent && !hasError && state.user && __jsx(StartDownloadForm, {\n    onRequestClose: onModalClose,\n    pdfForm: pdfForm,\n    onSubmit: function onSubmit() {\n      return setEmailSent(true);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 6\n    }\n  }), emailSent && !hasError && __jsx(ThankYou, {\n    description: \"Your download should start automatically. Enjoy!\",\n    footerMessage: \"Back to research\",\n    href: \"/research\",\n    onClick: onModalClose,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 6\n    }\n  })), __jsx(ContentWrapper, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 4\n    }\n  }, __jsx(Research, {\n    onClick: openModal,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 5\n    }\n  }), __jsx(WhitePaper, {\n    onClick: openModal,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 5\n    }\n  }), __jsx(Survey, {\n    onClick: openModal,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 5\n    }\n  }), __jsx(AnimatedFooterLink, {\n    message: \"Back to home\",\n    href: \"/\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 5\n    }\n  })), __jsx(ContactFooter, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 4\n    }\n  }));\n}, \"xlM/n90UzcN/cK23jbEM/NUfqFc=\", false, function () {\n  return [useStore];\n});\n\nvar _c;\n\n$RefreshReg$(_c, \"ContentWrapper\");","map":{"version":3,"sources":["/mnt/c/Users/warre/dev/flatiron/projects/market-data-company/pages/research.js"],"names":["React","useState","useCallback","styled","Landing","Research","WhitePaper","Survey","Layout","ContactFooter","ResearchPdfForm","StartDownloadForm","Modal","AnimatedFooterLink","ThankYou","pdfMapper","validateEmail","sendEmail","useStore","USER_SIGNED_UP","ContentWrapper","div","pdfForm","setPdfForm","modalVisible","setModalVisible","emailSent","setEmailSent","hasError","setHasError","firstName","company","email","form","setFormValues","state","dispatch","saveUser","formValues","type","payload","updateField","e","target","name","value","onSubmit","res","error","onModalClose","openModal","researchForm","isDisabled","user"],"mappings":"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","sourcesContent":["import React, { useState, useCallback } from 'react'\nimport styled from 'styled-components'\n\nimport {\n\tLanding,\n\tResearch,\n\tWhitePaper,\n\t// CaseStudies,\n\tSurvey\n} from '../sections/research-section'\n\nimport {\n\tLayout,\n\tContactFooter,\n\tResearchPdfForm,\n\tStartDownloadForm,\n\tModal,\n\tAnimatedFooterLink,\n\tThankYou\n} from '../components'\n\nimport pdfMapper from '../utils/pdfMapper'\n\n// Utils\nimport { validateEmail } from '../utils/validator'\nimport { sendEmail } from '../services/apiService'\n\nimport { useStore } from '../store/useStore'\nimport { USER_SIGNED_UP } from '../store/actionTypes'\n\nconst ContentWrapper = styled.div`\n\tmax-width: 1200px;\n\tmargin: 0 auto;\n\tpadding: 0 20px;\n\tmargin-bottom: 100px;\n`\n\nexport default () => {\n\tconst [pdfForm, setPdfForm] = useState('')\n\tconst [modalVisible, setModalVisible] = useState(false)\n\tconst [emailSent, setEmailSent] = useState(false)\n\tconst [hasError, setHasError] = useState(false)\n\n\tconst [form, setFormValues] = useState({\n\t\tfirstName: '',\n\t\tcompany: '',\n\t\temail: ''\n\t})\n\n\t// Hooks to save the users form data\n\tconst { state, dispatch } = useStore()\n\tconst saveUser = useCallback(\n\t\t(formValues) => dispatch({ type: USER_SIGNED_UP, payload: formValues }),\n\t\t[dispatch]\n\t)\n\n\tconst updateField = (e) => {\n\t\tsetFormValues({\n\t\t\t...form,\n\t\t\t[e.target.name]: e.target.value\n\t\t})\n\t}\n\n\tconst onSubmit = async () => {\n\t\ttry {\n\t\t\tconst res = await sendEmail(form)\n\t\t\tif (res.error) {\n\t\t\t\tsetHasError(true)\n\t\t\t} else {\n\t\t\t\t// Save user form to store\n\t\t\t\tsaveUser({\n\t\t\t\t\tname: form.firstName,\n\t\t\t\t\tcompany: form.company,\n\t\t\t\t\temail: form.email\n\t\t\t\t})\n\t\t\t\tsetEmailSent(true)\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tsetHasError(true)\n\t\t}\n\t}\n\n\tconst onModalClose = () => {\n\t\tsetModalVisible(false)\n\t\tsetEmailSent(false)\n\t}\n\n\tconst openModal = (researchForm) => {\n\t\tsetModalVisible(true)\n\t\tsetPdfForm(pdfMapper[researchForm])\n\t}\n\n\tconst isDisabled = form.firstName === '' || !validateEmail(form.email)\n\n\treturn (\n\t\t<Layout>\n\t\t\t<Landing />\n\t\t\t<Modal modalVisible={modalVisible} onRequestClose={onModalClose}>\n\t\t\t\t{!emailSent && !hasError && !state.user && (\n\t\t\t\t\t<ResearchPdfForm\n\t\t\t\t\t\tfirstName={form.firstName}\n\t\t\t\t\t\tcompany={form.company}\n\t\t\t\t\t\temail={form.email}\n\t\t\t\t\t\tonChange={updateField}\n\t\t\t\t\t\tisDisabled={isDisabled}\n\t\t\t\t\t\tonRequestClose={onModalClose}\n\t\t\t\t\t\tonSubmit={onSubmit}\n\t\t\t\t\t\tpdfForm={pdfForm}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{!emailSent && !hasError && state.user && (\n\t\t\t\t\t<StartDownloadForm\n\t\t\t\t\t\tonRequestClose={onModalClose}\n\t\t\t\t\t\tpdfForm={pdfForm}\n\t\t\t\t\t\tonSubmit={() => setEmailSent(true)}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{emailSent && !hasError && (\n\t\t\t\t\t<ThankYou\n\t\t\t\t\t\tdescription=\"Your download should start automatically. Enjoy!\"\n\t\t\t\t\t\tfooterMessage=\"Back to research\"\n\t\t\t\t\t\thref=\"/research\"\n\t\t\t\t\t\tonClick={onModalClose}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</Modal>\n\t\t\t<ContentWrapper>\n\t\t\t\t<Research onClick={openModal} />\n\t\t\t\t<WhitePaper onClick={openModal} />\n\t\t\t\t{/* <CaseStudies onClick={openModal} /> */}\n\t\t\t\t<Survey onClick={openModal} />\n\t\t\t\t<AnimatedFooterLink message=\"Back to home\" href=\"/\" />\n\t\t\t</ContentWrapper>\n\t\t\t<ContactFooter />\n\t\t</Layout>\n\t)\n}\n"]},"metadata":{},"sourceType":"module"}