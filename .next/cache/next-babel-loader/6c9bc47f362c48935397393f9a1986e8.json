{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/justin.w/Documents/GitHub/market-data-company/pages/contact.js\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Layout, ThankYou, ContactForm } from '../components';\nimport { Landing } from '../sections/contact-section';\nimport { validateEmail } from '../utils/validator';\nimport { useStore } from '../store/useStore';\nimport { USER_SIGNED_UP } from '../store/actionTypes';\nimport { sendEmail } from '../services/apiService';\nimport styled from 'styled-components';\nvar ContentWrapper = styled.div.withConfig({\n  displayName: \"contact__ContentWrapper\",\n  componentId: \"sc-1jz255m-0\"\n})([\"padding:0 20px;margin-bottom:100px;margin-top:-80px;display:flex;flex-direction:column;align-items:center;flex:1;z-index:0;min-height:640px;\"]);\nvar ThankYouWrapper = styled.div.withConfig({\n  displayName: \"contact__ThankYouWrapper\",\n  componentId: \"sc-1jz255m-1\"\n})([\"display:flex;flex-direction:column;flex:1;min-height:500px;margin:0 40px;\"]);\nexport default (function () {\n  var _useState = useState({\n    firstName: '',\n    company: '',\n    email: '',\n    message: ''\n  }),\n      form = _useState[0],\n      setFormValues = _useState[1];\n\n  var _useState2 = useState(false),\n      emailSent = _useState2[0],\n      setEmailSent = _useState2[1];\n\n  var _useState3 = useState(false),\n      hasError = _useState3[0],\n      setHasError = _useState3[1];\n\n  var _useState4 = useState(false),\n      formError = _useState4[0],\n      setFormError = _useState4[1];\n\n  var _useStore = useStore(),\n      dispatch = _useStore.dispatch;\n\n  var saveUser = useCallback(function (formValues) {\n    return dispatch({\n      type: USER_SIGNED_UP,\n      payload: formValues\n    });\n  }, [dispatch]);\n  var inputError = !form.firstName || !form.email || !validateEmail(form.email);\n  useEffect(function () {\n    if (formError && !inputError) {\n      setFormError(false);\n    }\n  }, [form]);\n\n  var updateField = function updateField(e) {\n    setFormValues(_objectSpread({}, form, _defineProperty({}, e.target.name, e.target.value)));\n  };\n\n  var onSubmit =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!inputError) {\n                _context.next = 3;\n                break;\n              }\n\n              setFormError(true);\n              return _context.abrupt(\"return\");\n\n            case 3:\n              _context.prev = 3;\n              saveUser({\n                name: form.name,\n                email: form.email,\n                company: form.company\n              });\n              _context.next = 7;\n              return sendEmail(form);\n\n            case 7:\n              res = _context.sent;\n\n              if (res.success) {\n                setEmailSent(true);\n              }\n\n              _context.next = 14;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](3);\n              setHasError(true);\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[3, 11]]);\n    }));\n\n    return function onSubmit() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, !emailSent && !hasError && __jsx(React.Fragment, null, __jsx(Landing, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }), __jsx(ContentWrapper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, __jsx(ContactForm, {\n    firstName: form.firstName,\n    company: form.company,\n    email: form.email,\n    message: form.message,\n    onChange: updateField,\n    onSubmit: onSubmit,\n    isError: formError,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }))), emailSent && !hasError && __jsx(ThankYouWrapper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, __jsx(ThankYou, {\n    description: \"We\\u2019ll reply to you at \".concat(form.email, \" as soon as possible.\"),\n    footerMessage: \"Back to home\",\n    href: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  })));\n});","map":{"version":3,"sources":["/Users/justin.w/Documents/GitHub/market-data-company/pages/contact.js"],"names":["React","useState","useEffect","useCallback","Layout","ThankYou","ContactForm","Landing","validateEmail","useStore","USER_SIGNED_UP","sendEmail","styled","ContentWrapper","div","ThankYouWrapper","firstName","company","email","message","form","setFormValues","emailSent","setEmailSent","hasError","setHasError","formError","setFormError","dispatch","saveUser","formValues","type","payload","inputError","updateField","e","target","name","value","onSubmit","res","success"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,WAArC,QAAwD,OAAxD;AAEA,SAASC,MAAT,EAAiBC,QAAjB,EAA2BC,WAA3B,QAA8C,eAA9C;AAEA,SAASC,OAAT,QAAwB,6BAAxB;AAEA,SAASC,aAAT,QAA8B,oBAA9B;AACA,SAASC,QAAT,QAAyB,mBAAzB;AACA,SAASC,cAAT,QAA+B,sBAA/B;AAEA,SAASC,SAAT,QAA0B,wBAA1B;AAEA,OAAOC,MAAP,MAAmB,mBAAnB;AAEA,IAAMC,cAAc,GAAGD,MAAM,CAACE,GAAV;AAAA;AAAA;AAAA,oJAApB;AAaA,IAAMC,eAAe,GAAGH,MAAM,CAACE,GAAV;AAAA;AAAA;AAAA,iFAArB;AAQA,gBAAe,YAAM;AAAA,kBACUb,QAAQ,CAAC;AACtCe,IAAAA,SAAS,EAAE,EAD2B;AAEtCC,IAAAA,OAAO,EAAE,EAF6B;AAGtCC,IAAAA,KAAK,EAAE,EAH+B;AAItCC,IAAAA,OAAO,EAAE;AAJ6B,GAAD,CADlB;AAAA,MACbC,IADa;AAAA,MACPC,aADO;;AAAA,mBAOcpB,QAAQ,CAAC,KAAD,CAPtB;AAAA,MAObqB,SAPa;AAAA,MAOFC,YAPE;;AAAA,mBAQYtB,QAAQ,CAAC,KAAD,CARpB;AAAA,MAQbuB,QARa;AAAA,MAQHC,WARG;;AAAA,mBAScxB,QAAQ,CAAC,KAAD,CATtB;AAAA,MASbyB,SATa;AAAA,MASFC,YATE;;AAAA,kBAUClB,QAAQ,EAVT;AAAA,MAUZmB,QAVY,aAUZA,QAVY;;AAWpB,MAAMC,QAAQ,GAAG1B,WAAW,CAC3B,UAAC2B,UAAD;AAAA,WAAgBF,QAAQ,CAAC;AAAEG,MAAAA,IAAI,EAAErB,cAAR;AAAwBsB,MAAAA,OAAO,EAAEF;AAAjC,KAAD,CAAxB;AAAA,GAD2B,EAE3B,CAACF,QAAD,CAF2B,CAA5B;AAKA,MAAMK,UAAU,GACf,CAACb,IAAI,CAACJ,SAAN,IAAmB,CAACI,IAAI,CAACF,KAAzB,IAAkC,CAACV,aAAa,CAACY,IAAI,CAACF,KAAN,CADjD;AAGAhB,EAAAA,SAAS,CAAC,YAAM;AACf,QAAIwB,SAAS,IAAI,CAACO,UAAlB,EAA8B;AAC7BN,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACA;AACD,GAJQ,EAIN,CAACP,IAAD,CAJM,CAAT;;AAMA,MAAMc,WAAW,GAAG,SAAdA,WAAc,CAACC,CAAD,EAAO;AAC1Bd,IAAAA,aAAa,mBACTD,IADS,sBAEXe,CAAC,CAACC,MAAF,CAASC,IAFE,EAEKF,CAAC,CAACC,MAAF,CAASE,KAFd,GAAb;AAIA,GALD;;AAOA,MAAMC,QAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACZN,UADY;AAAA;AAAA;AAAA;;AAEfN,cAAAA,YAAY,CAAC,IAAD,CAAZ;AAFe;;AAAA;AAAA;AAOfE,cAAAA,QAAQ,CAAC;AACRQ,gBAAAA,IAAI,EAAEjB,IAAI,CAACiB,IADH;AAERnB,gBAAAA,KAAK,EAAEE,IAAI,CAACF,KAFJ;AAGRD,gBAAAA,OAAO,EAAEG,IAAI,CAACH;AAHN,eAAD,CAAR;AAPe;AAAA,qBAaGN,SAAS,CAACS,IAAD,CAbZ;;AAAA;AAaToB,cAAAA,GAbS;;AAcf,kBAAIA,GAAG,CAACC,OAAR,EAAiB;AAChBlB,gBAAAA,YAAY,CAAC,IAAD,CAAZ;AACA;;AAhBc;AAAA;;AAAA;AAAA;AAAA;AAkBfE,cAAAA,WAAW,CAAC,IAAD,CAAX;;AAlBe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAARc,QAAQ;AAAA;AAAA;AAAA,KAAd;;AAsBA,SACC,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,CAACjB,SAAD,IAAc,CAACE,QAAf,IACA,4BACC,MAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,EAEC,MAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACC,MAAC,WAAD;AACC,IAAA,SAAS,EAAEJ,IAAI,CAACJ,SADjB;AAEC,IAAA,OAAO,EAAEI,IAAI,CAACH,OAFf;AAGC,IAAA,KAAK,EAAEG,IAAI,CAACF,KAHb;AAIC,IAAA,OAAO,EAAEE,IAAI,CAACD,OAJf;AAKC,IAAA,QAAQ,EAAEe,WALX;AAMC,IAAA,QAAQ,EAAEK,QANX;AAOC,IAAA,OAAO,EAAEb,SAPV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,CAFD,CAFF,EAiBEJ,SAAS,IAAI,CAACE,QAAd,IACA,MAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACC,MAAC,QAAD;AACC,IAAA,WAAW,uCAA2BJ,IAAI,CAACF,KAAhC,0BADZ;AAEC,IAAA,aAAa,EAAC,cAFf;AAGC,IAAA,IAAI,EAAC,GAHN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,CAlBF,CADD;AA6BA,CAnFD","sourcesContent":["import React, { useState, useEffect, useCallback } from 'react'\n\nimport { Layout, ThankYou, ContactForm } from '../components'\n\nimport { Landing } from '../sections/contact-section'\n\nimport { validateEmail } from '../utils/validator'\nimport { useStore } from '../store/useStore'\nimport { USER_SIGNED_UP } from '../store/actionTypes'\n\nimport { sendEmail } from '../services/apiService'\n\nimport styled from 'styled-components'\n\nconst ContentWrapper = styled.div`\n\tpadding: 0 20px;\n\tmargin-bottom: 100px;\n\tmargin-top: -80px;\n\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tflex: 1;\n\tz-index: 0;\n\tmin-height: 640px;\n`\n\nconst ThankYouWrapper = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex: 1;\n\tmin-height: 500px;\n\tmargin: 0 40px;\n`\n\nexport default () => {\n\tconst [form, setFormValues] = useState({\n\t\tfirstName: '',\n\t\tcompany: '',\n\t\temail: '',\n\t\tmessage: ''\n\t})\n\tconst [emailSent, setEmailSent] = useState(false)\n\tconst [hasError, setHasError] = useState(false)\n\tconst [formError, setFormError] = useState(false)\n\tconst { dispatch } = useStore()\n\tconst saveUser = useCallback(\n\t\t(formValues) => dispatch({ type: USER_SIGNED_UP, payload: formValues }),\n\t\t[dispatch]\n\t)\n\n\tconst inputError =\n\t\t!form.firstName || !form.email || !validateEmail(form.email)\n\n\tuseEffect(() => {\n\t\tif (formError && !inputError) {\n\t\t\tsetFormError(false)\n\t\t}\n\t}, [form])\n\n\tconst updateField = (e) => {\n\t\tsetFormValues({\n\t\t\t...form,\n\t\t\t[e.target.name]: e.target.value\n\t\t})\n\t}\n\n\tconst onSubmit = async () => {\n\t\tif (inputError) {\n\t\t\tsetFormError(true)\n\t\t\treturn\n\t\t}\n\n\t\ttry {\n\t\t\tsaveUser({\n\t\t\t\tname: form.name,\n\t\t\t\temail: form.email,\n\t\t\t\tcompany: form.company\n\t\t\t})\n\n\t\t\tconst res = await sendEmail(form)\n\t\t\tif (res.success) {\n\t\t\t\tsetEmailSent(true)\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tsetHasError(true)\n\t\t}\n\t}\n\n\treturn (\n\t\t<Layout>\n\t\t\t{!emailSent && !hasError && (\n\t\t\t\t<>\n\t\t\t\t\t<Landing />\n\t\t\t\t\t<ContentWrapper>\n\t\t\t\t\t\t<ContactForm\n\t\t\t\t\t\t\tfirstName={form.firstName}\n\t\t\t\t\t\t\tcompany={form.company}\n\t\t\t\t\t\t\temail={form.email}\n\t\t\t\t\t\t\tmessage={form.message}\n\t\t\t\t\t\t\tonChange={updateField}\n\t\t\t\t\t\t\tonSubmit={onSubmit}\n\t\t\t\t\t\t\tisError={formError}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ContentWrapper>\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t{emailSent && !hasError && (\n\t\t\t\t<ThankYouWrapper>\n\t\t\t\t\t<ThankYou\n\t\t\t\t\t\tdescription={`We’ll reply to you at ${form.email} as soon as possible.`}\n\t\t\t\t\t\tfooterMessage=\"Back to home\"\n\t\t\t\t\t\thref=\"/\"\n\t\t\t\t\t/>\n\t\t\t\t</ThankYouWrapper>\n\t\t\t)}\n\t\t</Layout>\n\t)\n}\n"]},"metadata":{},"sourceType":"module"}