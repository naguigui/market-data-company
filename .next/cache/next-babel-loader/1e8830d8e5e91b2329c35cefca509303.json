{"ast":null,"code":"var _jsxFileName = \"/mnt/c/Users/warre/dev/flatiron/projects/market-data-company/pages/index.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useCallback, useEffect } from 'react';\nimport { Layout, Modal, ThankYou, ResearchPdfForm, StartDownloadForm, ContactFooter, TickerTape } from '../components';\nimport { Landing, LeaderMarketData, WorkedWith, WhyMdc, Services, Research } from '../sections/home-section';\nimport pdfMapper from '../utils/pdfMapper'; // Utils\n\nimport { validateEmail } from '../utils/validator';\nimport { sendEmail } from '../services/apiService';\nimport { useStore } from '../store/useStore';\nimport { USER_SIGNED_UP } from '../store/actionTypes';\nimport styled from 'styled-components';\nimport breakpoint from 'styled-components-breakpoint';\nconst ContentWrapper = styled.div.withConfig({\n  displayName: \"pages__ContentWrapper\",\n  componentId: \"sc-1cvwks4-0\"\n})([\"max-width:1200px;padding:0 20px;margin:0 auto;\"]);\n\nconst Home = () => {\n  const {\n    0: modalVisible,\n    1: setModalVisible\n  } = useState(false);\n  const {\n    0: hasError,\n    1: setHasError\n  } = useState(false);\n  const {\n    0: emailSent,\n    1: setEmailSent\n  } = useState(false);\n  const {\n    0: pdfForm,\n    1: setPdfForm\n  } = useState('');\n  const {\n    0: articles,\n    1: setArticles\n  } = useState([]);\n  const {\n    0: form,\n    1: setFormValues\n  } = useState({\n    firstName: '',\n    company: '',\n    email: ''\n  }); // Fetch web scraper api to get current headlines\n\n  useEffect(() => {\n    fetch('http://localhost:4000/').then(res => res.json()).then(articleObjects => {\n      setArticles(...articleObjects);\n      console.log(articles);\n    });\n  }); // Hooks to save the users form data\n\n  const {\n    state,\n    dispatch\n  } = useStore();\n  const saveUser = useCallback(formValues => dispatch({\n    type: USER_SIGNED_UP,\n    payload: formValues\n  }), [dispatch]);\n\n  const onSubmit = async () => {\n    try {\n      const res = await sendEmail(form);\n\n      if (res.error) {\n        setHasError(true);\n      } else {\n        // Save user form to store\n        saveUser({\n          name: form.firstName,\n          company: form.company,\n          email: form.email\n        });\n        setEmailSent(true);\n      }\n    } catch (err) {\n      setHasError(true);\n    }\n  };\n\n  const updateField = e => {\n    setFormValues(_objectSpread(_objectSpread({}, form), {}, {\n      [e.target.name]: e.target.value\n    }));\n  };\n\n  const onModalClose = () => {\n    setModalVisible(false);\n    setEmailSent(false);\n  };\n\n  const openModal = researchForm => {\n    setModalVisible(true);\n    setPdfForm(pdfMapper[researchForm]);\n  };\n\n  const isDisabled = !form.firstName && !validateEmail(form.email);\n  return __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 3\n    }\n  }, __jsx(Landing, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 4\n    }\n  }), __jsx(TickerTape, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 4\n    }\n  }), __jsx(Modal, {\n    modalVisible: modalVisible,\n    onRequestClose: onModalClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 4\n    }\n  }, !emailSent && !hasError && !state.user && __jsx(ResearchPdfForm, {\n    firstName: form.firstName,\n    company: form.company,\n    email: form.email,\n    onChange: updateField,\n    isDisabled: isDisabled,\n    onRequestClose: onModalClose,\n    onSubmit: onSubmit,\n    pdfForm: pdfForm,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 6\n    }\n  }), !emailSent && !hasError && state.user && __jsx(StartDownloadForm, {\n    onRequestClose: onModalClose,\n    pdfForm: pdfForm,\n    onSubmit: () => setEmailSent(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 6\n    }\n  }), emailSent && !hasError && __jsx(ThankYou, {\n    description: \"Your download should start automatically. Enjoy!\",\n    footerMessage: \"Back to research\",\n    href: \"/research\",\n    onClick: onModalClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 6\n    }\n  })), __jsx(ContentWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 4\n    }\n  }, __jsx(LeaderMarketData, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 5\n    }\n  }), __jsx(WorkedWith, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 5\n    }\n  }), __jsx(WhyMdc, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 5\n    }\n  }), __jsx(Services, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 5\n    }\n  }), __jsx(Research, {\n    onClick: openModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 5\n    }\n  })), __jsx(ContactFooter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 4\n    }\n  }));\n};\n\nexport default Home;","map":{"version":3,"sources":["/mnt/c/Users/warre/dev/flatiron/projects/market-data-company/pages/index.js"],"names":["React","useState","useCallback","useEffect","Layout","Modal","ThankYou","ResearchPdfForm","StartDownloadForm","ContactFooter","TickerTape","Landing","LeaderMarketData","WorkedWith","WhyMdc","Services","Research","pdfMapper","validateEmail","sendEmail","useStore","USER_SIGNED_UP","styled","breakpoint","ContentWrapper","div","Home","modalVisible","setModalVisible","hasError","setHasError","emailSent","setEmailSent","pdfForm","setPdfForm","articles","setArticles","form","setFormValues","firstName","company","email","fetch","then","res","json","articleObjects","console","log","state","dispatch","saveUser","formValues","type","payload","onSubmit","error","name","err","updateField","e","target","value","onModalClose","openModal","researchForm","isDisabled","user"],"mappings":"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","sourcesContent":["import React, { useState, useCallback, useEffect } from 'react'\nimport {\n\tLayout,\n\tModal,\n\tThankYou,\n\tResearchPdfForm,\n\tStartDownloadForm,\n\tContactFooter,\n\tTickerTape\n} from '../components'\nimport {\n\tLanding,\n\tLeaderMarketData,\n\tWorkedWith,\n\tWhyMdc,\n\tServices,\n\tResearch\n} from '../sections/home-section'\n\nimport pdfMapper from '../utils/pdfMapper'\n\n// Utils\nimport { validateEmail } from '../utils/validator'\nimport { sendEmail } from '../services/apiService'\n\nimport { useStore } from '../store/useStore'\nimport { USER_SIGNED_UP } from '../store/actionTypes'\n\nimport styled from 'styled-components'\nimport breakpoint from 'styled-components-breakpoint'\n\nconst ContentWrapper = styled.div`\n\tmax-width: 1200px;\n\tpadding: 0 20px;\n\tmargin: 0 auto;\n\n`\n\nconst Home = () => {\n\tconst [modalVisible, setModalVisible] = useState(false)\n\tconst [hasError, setHasError] = useState(false)\n\tconst [emailSent, setEmailSent] = useState(false)\n\tconst [pdfForm, setPdfForm] = useState('')\n\tconst [articles, setArticles] = useState([])\n\n\tconst [form, setFormValues] = useState({\n\t\tfirstName: '',\n\t\tcompany: '',\n\t\temail: ''\n\t})\n\n\t// Fetch web scraper api to get current headlines\n\tuseEffect(() => {\n\t\tfetch('http://localhost:4000/')\n\t\t\t.then(res => res.json())\n\t\t\t.then(articleObjects => {\n\t\t\t\tsetArticles(...articleObjects)\n\t\t\t\tconsole.log(articles)\n\t\t\t})\n\t})\n\n\t// Hooks to save the users form data\n\tconst { state, dispatch } = useStore()\n\tconst saveUser = useCallback(\n\t\t(formValues) => dispatch({ type: USER_SIGNED_UP, payload: formValues }),\n\t\t[dispatch]\n\t)\n\n\tconst onSubmit = async () => {\n\t\ttry {\n\t\t\tconst res = await sendEmail(form)\n\t\t\tif (res.error) {\n\t\t\t\tsetHasError(true)\n\t\t\t} else {\n\t\t\t\t// Save user form to store\n\t\t\t\tsaveUser({\n\t\t\t\t\tname: form.firstName,\n\t\t\t\t\tcompany: form.company,\n\t\t\t\t\temail: form.email\n\t\t\t\t})\n\t\t\t\tsetEmailSent(true)\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tsetHasError(true)\n\t\t}\n\t}\n\n\tconst updateField = (e) => {\n\t\tsetFormValues({\n\t\t\t...form,\n\t\t\t[e.target.name]: e.target.value\n\t\t})\n\t}\n\n\tconst onModalClose = () => {\n\t\tsetModalVisible(false)\n\t\tsetEmailSent(false)\n\t}\n\n\tconst openModal = (researchForm) => {\n\t\tsetModalVisible(true)\n\t\tsetPdfForm(pdfMapper[researchForm])\n\t}\n\n\tconst isDisabled = !form.firstName && !validateEmail(form.email)\n\n\treturn (\n\t\t<Layout>\n\t\t\t<Landing />\n\t\t\t<TickerTape />\n\t\t\t<Modal modalVisible={modalVisible} onRequestClose={onModalClose}>\n\t\t\t\t{!emailSent && !hasError && !state.user && (\n\t\t\t\t\t<ResearchPdfForm\n\t\t\t\t\t\tfirstName={form.firstName}\n\t\t\t\t\t\tcompany={form.company}\n\t\t\t\t\t\temail={form.email}\n\t\t\t\t\t\tonChange={updateField}\n\t\t\t\t\t\tisDisabled={isDisabled}\n\t\t\t\t\t\tonRequestClose={onModalClose}\n\t\t\t\t\t\tonSubmit={onSubmit}\n\t\t\t\t\t\tpdfForm={pdfForm}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{!emailSent && !hasError && state.user && (\n\t\t\t\t\t<StartDownloadForm\n\t\t\t\t\t\tonRequestClose={onModalClose}\n\t\t\t\t\t\tpdfForm={pdfForm}\n\t\t\t\t\t\tonSubmit={() => setEmailSent(true)}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{emailSent && !hasError && (\n\t\t\t\t\t<ThankYou\n\t\t\t\t\t\tdescription=\"Your download should start automatically. Enjoy!\"\n\t\t\t\t\t\tfooterMessage=\"Back to research\"\n\t\t\t\t\t\thref=\"/research\"\n\t\t\t\t\t\tonClick={onModalClose}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</Modal>\n\t\t\t<ContentWrapper>\n\t\t\t\t<LeaderMarketData />\n\t\t\t\t<WorkedWith />\n\t\t\t\t<WhyMdc />\n\t\t\t\t<Services />\n\t\t\t\t<Research onClick={openModal} />\n\t\t\t</ContentWrapper>\n\t\t\t<ContactFooter />\n\t\t</Layout>\n\t)\n}\n\nexport default Home\n"]},"metadata":{},"sourceType":"module"}